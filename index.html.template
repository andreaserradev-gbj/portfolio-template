<!doctype html>
<html lang="{{meta.language}}">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary Meta Tags -->
    <title>{{page.title}}</title>
    <meta name="title" content="{{page.title}}" />
    <meta name="description" content="{{meta.description}}" />
    {{#if meta.keywords}}<meta name="keywords" content="{{meta.keywords}}" />{{/if}}
    <meta name="author" content="{{meta.author}}" />
    <meta name="robots" content="{{meta.robots}}" />
    <meta name="theme-color" content="{{meta.themeColor}}" />

    <!-- Canonical URL -->
    {{#if meta.url}}<link rel="canonical" href="{{meta.url}}" />{{/if}}

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{{meta.favicon}}" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="{{meta.ogType}}" />
    {{#if meta.url}}<meta property="og:url" content="{{meta.url}}" />{{/if}}
    <meta property="og:title" content="{{og.title}}" />
    <meta property="og:description" content="{{meta.description}}" />
    {{#if meta.ogImage}}<meta property="og:image" content="{{meta.ogImage}}" />
    <meta property="og:image:width" content="{{meta.ogImageWidth}}" />
    <meta property="og:image:height" content="{{meta.ogImageHeight}}" />{{/if}}
    <meta property="og:locale" content="{{meta.locale}}" />
    {{#if meta.ogSiteName}}<meta property="og:site_name" content="{{meta.ogSiteName}}" />{{/if}}

    <!-- Twitter Card -->
    <meta name="twitter:card" content="{{meta.twitterCard}}" />
    {{#if meta.url}}<meta name="twitter:url" content="{{meta.url}}" />{{/if}}
    <meta name="twitter:title" content="{{og.title}}" />
    <meta name="twitter:description" content="{{meta.description}}" />
    {{#if meta.ogImage}}<meta name="twitter:image" content="{{meta.ogImage}}" />{{/if}}

    <!-- JSON-LD Structured Data -->
    {{#if structuredData.enabled}}{{jsonld}}{{/if}}

    <!-- Fonts - Corporate + Hand-Drawn + Automotive Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&family=Kalam:wght@400;700&family=Outfit:wght@400;500;700;900&family=Patrick+Hand&family=Space+Grotesk:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Prevent flash of incorrect theme and design system -->
    <script>
      ;(function () {
        try {
          var params = new URLSearchParams(window.location.search)

          // Design system: URL param > localStorage > default
          // NOTE: Auto-generated from design-systems.json
          var validDesignSystems = {{validDesignSystems}}
          var urlDesign = params.get('design')
          var storedDesign = localStorage.getItem('portfolio-design-system')
          var designSystem
          if (urlDesign && validDesignSystems.indexOf(urlDesign) !== -1) {
            designSystem = urlDesign
          } else {
            if (urlDesign) {
              console.warn(
                'Invalid design system in URL: "' +
                  urlDesign +
                  '". ' +
                  'Valid options: ' +
                  validDesignSystems.join(', ') +
                  '.'
              )
            }
            designSystem = storedDesign || '{{defaultDesignSystem}}'
          }
          document.documentElement.setAttribute(
            'data-design-system',
            designSystem
          )

          // Theme: URL param > localStorage > default
          var urlTheme = params.get('theme')
          var storedTheme = localStorage.getItem('portfolio-theme')
          var theme =
            urlTheme === 'light' || urlTheme === 'dark' || urlTheme === 'system'
              ? urlTheme
              : storedTheme || 'system'

          var prefersDark = window.matchMedia(
            '(prefers-color-scheme: dark)'
          ).matches
          var isDark = theme === 'dark' || (theme === 'system' && prefersDark)
          if (isDark) document.documentElement.classList.add('dark')
        } catch (e) {
          // localStorage unavailable (private mode, disabled) - use defaults
          document.documentElement.setAttribute(
            'data-design-system',
            '{{defaultDesignSystem}}'
          )
        }
      })()
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
